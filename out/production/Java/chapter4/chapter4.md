# chapter4

## 类

子类继承父类，会继承父类的**所有**属性与方法；包括私有的，但不能在子类中直接访问

依赖是指一个类的方法使用或操纵另一个类的对象，但应将这种依赖减至最少，这就是**降低耦合**；聚合是指一个类的对象包含另一个类的对象

在一个源文件中，**只能**有一个公共类，但可以有任意数目的非公共类

类中如果有**常量**，就必须在构造对象的时候初始化；final修饰符对于类型为基本类型或者不可变类的字段尤其有用

定义为static的字段为静态字段，也叫类字段；与非静态字段不同的是，类字段**只有**一个，每个对象使用同一个类字段，但每一个对象都有一个非静态字段的副本

静态字段更多的是静态常量，每一个对象都使用同一个常量

每一个类中都可以有一个main方法，用于测试类的功能；在一个大型项目中只有一个类的main方法会生效

## 对象

三个特性：

- 行为，就是对象的可以应用的方法
- 状态，调用方法后，对象产生的响应
- 标识，区分具有相同行为与状态不同的对象

构造对象必须使用构造器，并使用new关键字，一个简单的类对象就是new加上构造器；同样可以将这个类对象赋值给变量，这种行为称为变量引用对象，这种变量就是对象变量

Java的对象变量类似于C++的对象指针，因此对象都存放在堆中。Java也可以不使用这种方式引用对象，通过clone方法获得对象的副本

###构造

**字段与局部变量**的一个重要区别：方法中的局部变量必须明确地初始化，但是在类中，如果没有初始化字段，将会自动初始化为默认值

如果类中提供了**至少**一个构造器，但没有提供无参数的构造器，那么构造对象时不提供参数就是不合法的

与C++不同的是，Java可以**直接**在类中赋值实例字段

参数命名上可以与实例字段同名，但在代码中**必须**使用this指示隐式参数

在方法中使用this(...)可以调用**同一个类**中的另一个构造器

初始化数据字段的方法：

- 在构造器中设置值
- 在声明中赋值
- 初始化块

初始化块是**紧接**在构造器之后运行的，一般是把初始化块放在构造器中，并且初始化块应放在字段定义之后

如果类的静态字段需要复杂的初始化代码，可以使用静态的初始化块，在初始化块前加上static

## 方法

- 更改器方法：访问对象会导致对象状态的改变的方法
- 访问器方法：只访问对象而不修改对象的方法；类似于C++中有const后缀修饰的方法；**不要**编写返回可变对象引用的方法

如果需要返回一个可变对象的引用，首先应该对它进行**克隆**；**可变对象**大致是指具有更改器方法的类创建的对象

用var关键字声明**局部变量**

方法可以访问所属类**任何对象**的私有特性，而不仅限于隐式参数

私有方法也是存在的，但**仅限于**类中使用，因此这个方法的依赖性极低，往往可以轻易删除

java.time.LocalDate

- static LocalDate now() 构造一个表示当前日期的对象
- static LocalDate of(int year, int month, int day) 构造一个表示给定日期的对象
- int getYear(), int getMonthOfValue(), int getDayOfValue() 得到当前日期的年、月和日
- DayOfWeek getDayOfWeek 得到当前日期是星期几，作为DayOfWeek类的一个实例返回。调用getValue来得到1~7之间的一个数，表示这是星期几，1表示星期一，7表示星期日
- LocalDate plusDays(int n), LocalDate minusDays(int n) 生成当前日期之后或之前n天的日期

不在对象上执行的方法就是**静态方法**，可以使用对象名调用静态方法，但使用**类名调用静态方法**更加适合

静态方法不能访问实例字段，**只能**访问静态字段

可以使用静态方法的情况：

- 方法**不需要**访问对象状态
- 方法**只需要**访问类的静态字段

工厂方法，静态方法的一种**用途**，用来**构造**对象；方法返回的是**类对象**

java.util.Objects

- static <T> void requireNonNull(T obj), static <T> void requireNonNull(T obj, String message), static <T> void requireNonNull(T obj, Supplier<String> messageSupplier)
如果obj为null，这些方法会抛出一个NullPointerException异常而没有消息或者给定消息
- static <T> T requireNonNullElse(T obj, T defaultObj), static <T> T requireNonNullElseGet(T obj, Supplier<T> defaultSupplier)
如果obj不为null则返回obj，或者如果obj为null则返回默认对象

有两种类型的方法参数：

- 基本数据类型（数字、布尔值）
- 对象引用

两种都是按值传递，只不过对象引用传递的是引用的**副本**

java.util.Random

- Random() 构造一个新的随机数生成器
- int nextInt(int n) 返回一个0~n-1之间的随机数

方法的名字和参数列表是方法的签名，返回类型不是签名的一部分

## 包

如果导入的包存在相同名称的类又都使用它们，必须在代码中类使用的位置前加入完整的包名

在import后加上static可以导入静态方法和静态字段，大部分时候代码中其他包中的静态方法和字段都是使用完整包名

要想将类放入包中，必须将包的名字放在源文件的开头

使用**命令行**编译运行必须在**基目录**下执行命令，基目录即包含包的目录

如果没有指定public或private，这个部分（类、方法或变量）可以被同一个包中的所有方法访问

在终端编译运行程序是往往因为导入了其他的类、方法或变量而需要设置**类路径**classpath，在javac后加上-classpath来确定类路径

在终端可以通过set CLASSPATH=...设置暂时的类路径用于多个程序编译运行，也可以设置系统的环境变量CLASSPATH路径但不推荐这种方式

## jar文件

创建一个新jar文件最常用的命令使用语法：jar -c -v -f jarFileName file1 file2 ...

**多**字母选项前加--，**单**字母前加-，将所有选项分开写

jar的部分选项及简单说明：

- c 创建一个新的或空的存档文件并加入文件；如果指定的文件名是目录，jar程序将会对其递归处理
- C 临时改变目录
- e 在清单文件中创建一个入口点
- f 指定jar文件名作为第二个命令行参数
- i 建立索引文件
- m 将一个清单文件添加到jar文件中
- M 不为条目创建清单文件
- t 显示内容表
- u 更新一个已有的jar文件
- v 生成详细的输出结果
- x 解压文件
- 0 存储，但不进行zip压缩

## 文档注释

一个方法的所有相同标记**必须**放在一起

@see和@link使用超链接，一般链接的是类、变量或方法

包注释：

- package-info.java文件
- package.html文件

使用javadoc提取注释，一般使用选项d自定义文件夹存放提取的文件
